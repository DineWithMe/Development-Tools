# Back End Technologies

Depend on a lot of factors and needs, libraries will change from time to time.

Here is simple justification of important library that we are going to use.

## JWT

![](./img/jwt.jpg)

The first thing come to my mind is not a big think like OS, server and framework, but a small thing like "cookie or JWT?".

I end up choosing JWT because I think the idea of not storing it lift up some of my burden, however there is still space for argument.

Here is what JWT offer:

1. Dont require to store in database, less space needed, a create and forget stateless string.
2. It is hashed, you can easily verify whether the token is generated by you and virtually impossible to crack.
3. Hashed also mean that any modification to the token will render it invalid immediately, thus resistance to alteration.
4. The hash output a fix length of string regardless of the input it receive, so we can store a lot of public information in it which is quite convenient if you want to quickly display user information without accessing database.

Do aware anyone can see the public information without the need of secret key, it is as simple as just go to https://jwt.io/ and paste the JWT there, so never store sensitive information in it.

We can also create a hashed cookie that carry public info, but that just make the cookie a jwt because it is just a standard to follow.

Here is what JWT conventionally cannot offer but has work around:

1. It is not automatically included in every request like cookie, we need to manually set it in Authorization header.

And this is bad for server side rendering, without automatic inclusion, we cannot render initial page with user data.

Solution: Simply set the JWT as cookie, whether JWT or cookie, they are just a string that can be automatically included in request cookie.

2. You cannot revoke/blacklisting JWT

Solution: Then just add it to your database, like how you store cookie on your server.

Some might argue, the work around just make JWT a cookie, so why not just use cookie in the first place?

Well, the answer is simple, JWT can at least store public information.

JWT can do what cookie do, but cookie cannot do what JWT can do.

However there is some weakness of JWT which dont have viable workaround yet:

1. JWT is much much larger than cookie, and if you treat it like cookie and automatically send it in every request, it will hurt the data consumption especially mobile device.

2. Hashing consume more computation power, server do more work than usual.

On practical sense:

1. Most user data are dynamic data, in the end you probably dont use information in jwt for your page content.

Although jwt can do what cookie do and with more functionality but does JWT benefit really out weight its shortcoming? At least for this project I dont feel much of its usefulness, the only thing I found useful is I dont need to query the database to check whether the user exist or not.

However there is a loophole in this process, what if the user delete their account from other device with different JWT? And because JWT is not revokable, in the end I still need to query the database.

But I believe I will found a use case when the application get complicated so I will continue to use it.

## Nodejs

The reason I use Nodejs is straight and simple, it provides faster development and better developer experience as it use the same language in front end.

We dont need to learn extra language and install whole set of text editor extensions for back end, it make full stack developer life easier.

Because Nodejs is small and light weight, it is very suitable for building micro service and deploy with Docker, it is also easier for front end developer to transcend into back end.

The most serious drawback is Nodejs is single threaded, this limit it to handle complicated request.

Update:

It turns out that using same language with front end is relatively much more important than what previously I think it is. By avoiding adding new language into your tech stack, you avoid adding new programming paradigm and bunch of complexity you dont need.

Another reason is the community and package manager, recently I tried out Python Flask, the very first thing I noticed is, python package manager Pip or Anaconda, utility and user friendly wise are lag behind what Javascript NPM, the back end community is also as vibrant as Javascript community.

## GraphQL-Yoga

Yoga is a GraphQL server framework which consist of Apollo Server and Express, since this project is utilizing GraphQL end point and the world is dominate by REST api so it is natural choice to use this framework.

But why not just Apollo Server, Apollo Server also can expose the Express api. Well, this is in consideration, but as for now, there is no urge to change.
